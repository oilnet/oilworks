% LaTeX style sheet for theses at the Oriental Institut, University of Leipzig.
% Based on jackson13's mla13 style designed for the Modern Language Association's
% style guidelines (see https://github.com/jackson13info/mla13).
\ProvidesPackage{oilworks}
\usepackage[a4paper]{geometry} % changed from letterpaper.
\usepackage[english]{babel} % changed from american.
\usepackage[ngerman]{datetime}
\usepackage{csquotes}
\usepackage{courier}
\setlength{\parindent}{0em} % changed from 0.5em. 0.75cm is good for no parskip.
% \setlength{\parskip}{6pt} % preferred value at OIL; now using "half", which is set in the document declaration and is ever-so-slightly less than 6pt and makes for a less torn-apart look.
\usepackage[style=authoryear,backend=biber]{biblatex} %mladraft=true,annotation=true,
\usepackage{color}
\usepackage{multicol}
\newcommand{\sources}[1]{\def\@sources{#1}\bibliography{#1}}
%removes the space added to the center environment
%\newenvironment{nospacecenter}{\parskip=0pt\par\nopagebreak\centering}{\par\noindent\ignorespacesafterend} % don't think I need this...
%Formatting Commands
\renewcommand \thesection {\@arabic\c@section.}
\renewcommand\thesubsection {\thesection\@arabic\c@subsection}
% This changes section headings.
\renewcommand\section{\@startsection{section}{1}{\z@}%
{\z@}%
{\lineskip}}
\renewcommand\subsection{\@startsection{subsection}{2}{\z@}%
{\z@}%
{\lineskip}}
\renewcommand\subsubsection{\@startsection{subsubsection}{3}{\z@}%
{\z@}%
{\lineskip}}
% Changed 1.5ex to 3.5ex.
\def\section{\@startsection{section}{1}{\z@}{-5.25ex plus -1ex minus -.2ex}{3.5ex plus .2ex}{\newpage\center\large\textbf}}
\def\subsection{\@startsection{subsection}{1}{\z@}{-5.25ex plus -1ex minus -.2ex}{3.5ex plus .2ex}{\large\textbf}}
\def\subsubsection{\@startsection{subsubsection}{1}{\z@}{-5.25ex plus -1ex minus -.2ex}{3.5ex plus .2ex}{\large\textbf}}
\def\thesection{\arabic{section}}
\renewcommand\paragraph{\@startsection{paragraph}{4}{\z@}%
{\z@}%
{\lineskip}%
{\normalfont}}
\renewcommand\subparagraph{\@startsection{subparagraph}{5}{\parindent}%
{\z@}%
{\lineskip}%
{\normalfont}}
\usepackage{datetime}
\usepackage{fancyhdr}
\newcommand{\university}[1]{
\def\@university{#1}
}
\newcommand{\faculty}[1]{
\def\@faculty{#1}
}
\newcommand{\institute}[1]{
\def\@institute{#1}
}
\newcommand{\typeofwork}[1]{
\def\@typeofwork{#1}
}
\newcommand{\firstassessor}[1]{
\def\@firstassessor{#1}
}
\newcommand{\secondassessor}[1]{
\def\@secondassessor{#1}
}
\newcommand{\matriculationnumber}[1]{
\def\@matriculationnumber{#1}
}
\newcommand{\emailaddress}[1]{
\def\@emailaddress{#1}
}
\newcommand{\streetandhousenumber}[1]{
\def\@streetandhousenumber{#1}
}
\newcommand{\postcodeandcity}[1]{
\def\@postcodeandcity{#1}
}
\newcommand{\workperiodstart}[1]{
\def\@workperiodstart{#1}
}
\newcommand{\workperiodend}[1]{
\def\@workperiodend{#1}
}
% Things needed beyond what mla13 provided.
\usepackage{titling}
\usepackage{url}
\urlstyle{same}
\usepackage[hidelinks]{hyperref}
% should work but doesn't - problem with another package?
% \usepackage{attachfile}
% \textattachfile[mimetype=audio/mpeg,color=0 0 0]{output/audios/v4l1.mp3}
% \attachfile{output/audios/v4l1.mp3}
\usepackage{import}
\usepackage{tocstyle}
\usepackage[nottoc,numbib]{tocbibind}
\usepackage{booktabs}
\usepackage{graphicx}
\usepackage{blindtext}
\usepackage[section]{minted}
\usepackage{mdframed}
\usepackage{colortbl}
\definecolor{lightgray}{rgb}{0.95,0.95,0.95}
\definecolor{mediumgray}{rgb}{0.8,0.8,0.8}
\definecolor{darkgray}{rgb}{0.25,0.25,0.25}
\definecolor{black}{rgb}{0,0,0}
\newmintedfile[rubycode]{ruby}{
  bgcolor=lightgray,
  fontsize=\tiny,
  linenos=true,
  numberblanklines=true,
  numbersep=12pt,
  numbersep=5pt,
  gobble=0,
  frame=leftline,
  framerule=0.4pt,
  framesep=4mm,
  funcnamehighlighting=true,
  tabsize=2,
  obeytabs=false,
  mathescape=false,
  samepage=true,
  showspaces=false,
  showtabs=false,
  texcl=false,
}
\usepackage{pdfpages}
\usepackage{array}
\usepackage{longtable}
\usepackage{geometry}
\usepackage{fontspec}
% \usepackage{ragged2e}
\usepackage{polyglossia} % Also loads bidi!
\setmainlanguage{english}
\setotherlanguage{arabic}
\newfontfamily\arabicfont[Script=Arabic,Scale=1.1]{Amiri}
\usepackage{setspace}
\onehalfspacing
% redefine \textarabic{} to have bigger linespacing to accomodate the taškīl.
\def\ara{\doublespacing\textarabic}
\sources{references.bib}
\setmainfont[Ligatures=TeX]{Charis SIL}
\setmonofont{Courier New}
\setsansfont{DejaVu Sans}
\newcommand{\latin}[1]{{\emph{#1}}} % For easier handling of how latin phrases are formatted.
\newcommand{\dmg}[1]{{\emph{#1}}} % The same for DMG transliteration.
%\newcommand{\textar}[1]{\fontspec{Arial}\beginR{#1}\endR\rmfamily} % using \textarabic instead which is already defined
\newcolumntype{J}[1]{>{\arraybackslash}p{#1}}
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}}
\newcolumntype{M}[1]{>{\color{gray}\raggedright\arraybackslash}p{#1}}
\newcolumntype{R}[1]{>{\raggedleft\arraybackslash}p{#1}}
% Back to stuff that was once mla13.
\fancyhf{}
\fancyhead{}
\renewcommand{\headrulewidth}{0pt}
\geometry{top=3cm,bottom=3cm,left=2.5cm,right=2.5cm} % changed from 1in for all four sides.
\usepackage[absolute]{textpos}
\usepackage{float}
\usepackage{parcolumns}
\newcommand*{\makeheader}{\begin{titlepage}
  \begin{center}
  \pagestyle{empty}
  \selectlanguage{german}
  \begingroup
    {\LARGE \@university} \\
    {\normalsize \@faculty} \\
    {\Large \@institute} \\
  \endgroup
  \vspace*{0.5cm}
  \includegraphics[height=150pt,width=150pt]{oilworks/uofl_official_seal}\\
  \vspace*{0.35cm}
  \begingroup
    {\LARGE \@typeofwork} \\
  \endgroup
  \vspace*{1.25cm}
  \begingroup
    {\LARGE \@title} \\
    {\normalsize \textit{\@subtitle}} \\
  \endgroup
  \vspace*{1.25cm}
  \small
  \begingroup
    1. Gutachter: \@firstassessor \\
    2. Gutachter: \@secondassessor \\
  \endgroup
  \vspace*{1.25cm}
  \begin{textblock*}{50mm}(30mm,228mm)
  \begin{flushleft}
  \begingroup
    Vorgelegt von \\
    \@author \\
    Matrikel-Nr.: \@matriculationnumber \\
    \@emailaddress \\
    \@streetandhousenumber \\
    \@postcodeandcity \\
    am \@date \\
  \endgroup
  \end{flushleft}
  \end{textblock*}
  \vspace*{1.25cm}
  \begin{textblock*}{50mm}(142mm,258mm)
  \begin{flushleft}
  \begingroup
    Bearbeitungszeitraum: \\
    \@workperiodstart--\@workperiodend
  \endgroup
  \end{flushleft}
  \end{textblock*}
  \selectlanguage{english}
  \end{center}
\end{titlepage}
\clearpage
\tableofcontents
\thispagestyle{empty}
\clearpage
}
\newcommand*{\makeworkscited}{\begingroup
\pagebreak
\section{Works Cited}
\printbibliography[heading=none]
\endgroup}
% scrartcl seems to have a slightly larger font in tables for some reason - reverse this.
\let\oldlongtable\longtable
\renewcommand{\longtable}{\small\oldlongtable}
